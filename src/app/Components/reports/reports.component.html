@if(isLoading){
<app-spinner></app-spinner>
}
<section class="p-4">
  <div>
    <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
      <li [ngbNavItem]="1">
        <button ngbNavLink>
          {{ "reports.driverCommitionReport" | translate }}
        </button>
        <ng-template ngbNavContent>
          <div class="card-body mt-4"></div>
          <form [formGroup]="searchDriversCommissionForm">
            <div class="row g-3 align-items-center">
              <div class="col-auto">
                <label for="inputPassword6" class="col-form-label">{{
                  "tables.shiftTable.fromDate" | translate
                }}</label>
              </div>
              <div class="col-auto">
                <input
                  type="date"
                  class="form-control form-group"
                  formControlName="startDate"
                />
              </div>
              <div class="col-auto">
                <label for="inputPassword6" class="col-form-label">{{
                  "tables.shiftTable.toDate" | translate
                }}</label>
              </div>
              <div class="col-auto">
                <input
                  type="date"
                  class="form-control"
                  formControlName="endDate"
                />
              </div>
              <div class="col-auto">
                <label for="inputPassword6" class="col-form-label">{{
                  "reports.drivers" | translate
                }}</label>
              </div>
              <div class="col-auto">
                <p-multiSelect
                  [options]="drivers"
                  formControlName="drivers"
                  optionLabel="user.fullName"
                  optionValue="id"
                  appendTo="body"
                  [virtualScroll]="true"
                  [virtualScrollItemSize]="43"
                ></p-multiSelect>
              </div>
              <div class="col-auto">
                <button
                  class="btn btn-primary"
                  (click)="searchForsearchDriversCommission()"
                >
                  {{ "tables.shiftTable.search" | translate }}
                </button>
              </div>
            </div>
          </form>
          @if(driversCommissionData.length > 0){
          <div
            class="table-container h-100 bg-white rounded-4 pb-3 p-2 shadow-sm position-relative"
          >
            <table class="w-100 table-content position-relative">
              <thead class="w-100">
                <tr class="py-2 px-4 w-100">
                  <th
                    [ngStyle]="{
                      'text-align': lang == 'Ar' ? 'right' : 'left'
                    }"
                    [ngClass]="{
                      'first-heading pe-3': lang == 'En',
                      'first-heading-Ar ps-3': lang == 'Ar'
                    }"
                  >
                    {{ "reports.driverName" | translate }}
                  </th>

                  <th
                    [ngClass]="{
                      'second-heading': lang == 'En',
                      'second-heading-Ar': lang == 'Ar'
                    }"
                  >
                    {{ "reports.total" | translate }}
                  </th>
                </tr>
              </thead>
              <tbody class="w-100">
                @for(driversCommission of driversCommissionData; track
                driversCommission) {
                <tr class="w-100">
                  <td>
                    {{ driversCommission?.driverName }}
                  </td>
                  <td>
                    {{
                      driversCommission?.totalCommission
                        ? driversCommission?.totalCommission
                        : "--"
                    }}
                    LE
                  </td>

                  <td>
                    <div
                      class="route-details rounded-4 d-flex align-items-center justify-content-center"
                    ></div>
                  </td>
                </tr>
                }
              </tbody>
            </table>
          </div>
          }
        </ng-template>
      </li>
      <li [ngbNavItem]="2">
        <button ngbNavLink>
          {{ "reports.requestsPaymentMethod" | translate }}
        </button>
        <ng-template ngbNavContent>
          <div class="card-body mt-4"></div>
          <form [formGroup]="searchRequestsPaymentMethodForm">
            <div class="row g-3 align-items-center">
              <div class="col-auto">
                <label for="inputPassword6" class="col-form-label">{{
                  "tables.shiftTable.fromDate" | translate
                }}</label>
              </div>
              <div class="col-auto">
                <input
                  type="date"
                  class="form-control form-group"
                  formControlName="from"
                />
              </div>
              <div class="col-auto">
                <label for="inputPassword6" class="col-form-label">{{
                  "tables.shiftTable.toDate" | translate
                }}</label>
              </div>
              <div class="col-auto">
                <input type="date" class="form-control" formControlName="to" />
              </div>

              <div class="col-auto">
                <button
                  class="btn btn-primary"
                  (click)="searchRequestsPaymentMethod()"
                >
                  {{ "tables.shiftTable.search" | translate }}
                </button>
              </div>
            </div>
          </form>
          @if(driversCommissionData.length > 0){
          <div
            class="table-container h-100 bg-white rounded-4 pb-3 p-2 shadow-sm position-relative"
          >
            <table class="w-100 table-content position-relative">
              <thead class="w-100">
                <tr class="py-2 px-4 w-100">
                  <th
                    [ngStyle]="{
                      'text-align': lang == 'Ar' ? 'right' : 'left'
                    }"
                    [ngClass]="{
                      'first-heading pe-3': lang == 'En',
                      'first-heading-Ar ps-3': lang == 'Ar'
                    }"
                  >
                    {{ "reports.driverName" | translate }}
                  </th>

                  <th
                    [ngClass]="{
                      'second-heading': lang == 'En',
                      'second-heading-Ar': lang == 'Ar'
                    }"
                  >
                    {{ "reports.total" | translate }}
                  </th>
                </tr>
              </thead>
              <tbody class="w-100">
                @for(driversCommission of driversCommissionData; track
                driversCommission) {
                <tr class="w-100">
                  <td>
                    {{ driversCommission?.driverName }}
                  </td>
                  <td>
                    {{
                      driversCommission?.totalCommission
                        ? driversCommission?.totalCommission
                        : "--"
                    }}
                    LE
                  </td>

                  <td>
                    <div
                      class="route-details rounded-4 d-flex align-items-center justify-content-center"
                    ></div>
                  </td>
                </tr>
                }
              </tbody>
            </table>
          </div>
          }
        </ng-template>
      </li>
      <li [ngbNavItem]="3">
        <button ngbNavLink>
          {{ "reports.requestsStatus" | translate }}
        </button>
        <ng-template ngbNavContent>
          <div class="card-body mt-4"></div>
          <form [formGroup]="searchRequestsStatusForm">
            <div class="row g-3 align-items-center">
              <div class="col-auto">
                <label for="inputPassword6" class="col-form-label">{{
                  "tables.shiftTable.fromDate" | translate
                }}</label>
              </div>
              <div class="col-auto">
                <input
                  type="date"
                  class="form-control form-group"
                  formControlName="from"
                />
              </div>
              <div class="col-auto">
                <label for="inputPassword6" class="col-form-label">{{
                  "tables.shiftTable.toDate" | translate
                }}</label>
              </div>
              <div class="col-auto">
                <input type="date" class="form-control" formControlName="to" />
              </div>

              <div class="col-auto">
                <button
                  class="btn btn-primary"
                  (click)="searchRequestsStatus()"
                >
                  {{ "tables.shiftTable.search" | translate }}
                </button>
              </div>
            </div>
          </form>
          @if(RequestsStatusData.length > 0){
          <div
            class="table-container h-100 bg-white rounded-4 pb-3 p-2 shadow-sm position-relative"
          >
            <table class="w-100 table-content position-relative">
              <thead class="w-100">
                <tr class="py-2 px-4 w-100">
                  <th
                    [ngStyle]="{
                      'text-align': lang == 'Ar' ? 'right' : 'left'
                    }"
                    [ngClass]="{
                      'first-heading pe-3': lang == 'En',
                      'first-heading-Ar ps-3': lang == 'Ar'
                    }"
                  >
                    {{ "reports.name" | translate }}
                  </th>

                  <th
                    [ngClass]="{
                      'second-heading': lang == 'En',
                      'second-heading-Ar': lang == 'Ar'
                    }"
                  >
                    {{ "reports.totalPrice" | translate }}
                  </th>
                </tr>
              </thead>
              <tbody class="w-100">
                @for(RequestStatusData of RequestsStatusData; track
                RequestStatusData) {
                <tr class="w-100">
                  <td>
                    {{ RequestStatusData?.name }}
                  </td>
                  <td>
                    {{ RequestStatusData?.totalPrice }}
                  </td>
                </tr>
                }
              </tbody>
            </table>
          </div>
          }
        </ng-template>
      </li>
      <li [ngbNavItem]="4">
        <button ngbNavLink>
          {{ "reports.shifts" | translate }}
        </button>
        <ng-template ngbNavContent>
          <app-shifts></app-shifts>
        </ng-template>
      </li>
    </ul>

    <div [ngbNavOutlet]="nav" class="mt-2"></div>
  </div>
</section>
